<% form_for @exercise do |f| %>
  <%= f.error_messages %>
  <p>
    <%= f.label :title %><br />
    <%= f.text_field :title %>
  </p>
  <p>
    <%= f.label :chapter %><br />
    <%= f.text_field :chapter %>
  </p>
  <p>
    <%= f.label :question %><br />
    <%= f.text_area :question %>
  </p>

	<p><strong>Help</strong></p>
	<p>TODO: insert allow markup guide</p>
	<%= f.text_area :help %>
	
	<hr />
	
	<% unless @exercise.multiple_choices.empty? %>
		<% f.fields_for :multiple_choices do |mc_builder| %>
			<%= render "multiple_choice_block", :f => mc_builder %>
		<% end %>
	<% end %>
	
	<% unless @exercise.single_choices.empty? %>
		<% f.fields_for :single_choices do |sc_builder| %>
			<%= render "single_choice_block", :f => sc_builder %>
		<% end %>
	<% end %>
	
	<% unless @exercise.marktexts.empty? %>
		<% f.fields_for :marktexts do |mt_builder| %>
			<%= render "marktext_block", :f => mt_builder %>
		<% end %>
	<% end %>
	
	<% unless @exercise.clozes.empty? %>
		<% f.fields_for :clozes do |c_builder| %>
			<%= render "cloze_block", :f => c_builder %>
		<% end %>
	<% end %>
	
	<% unless @exercise.dropdowns.empty? %>
		<% f.fields_for :dropdowns do |dd_builder| %>
			<%= render 'dropdown_block', :f => dd_builder %>
		<% end %>
	<% end %>
	
	<br />
	<p>
		<%= link_to_add_type "Add Multiple Choice", f, :multiple_choices %> |
		<%= link_to_add_type "Add Single Choice", f, :single_choices %> |
		<%= link_to_add_type "Add Marktext", f, :marktexts %> |
		<%= link_to_add_type "Add Cloze", f, :clozes %> |
		<%= link_to_add_type "Add Dropdown", f, :dropdowns %>
	</p>
	
	<hr />
	<p><%= f.submit %></p>
	<hr />
<% end %>

